<!DOCTYPE html>
<html
        lang="ko"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="layout/result_layout"
>

<head>
    <link rel="stylesheet" type="text/css" th:href="@{/css/page_css/result_content.css}">
    <script
            src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
            crossorigin="anonymous"></script>
    <script th:src="@{/javascript/result_page_js/result_script.js}"></script>
</head>

<div layout:fragment="result_content">
    <!-- main 시작 -->
    <section class="main-content">
        <div class="container first-content">
            <!-- Content here -->
            <div>
                <div class="first-content-title-div">
                    <h1 class="first-content-title">기능 설명</h1>
                </div>
                <div class="first-content-info-div">
                    <p class="first-content-info">간략한 기능 설명 간략한 기능 설명 간략한 기능 설명</p>
                </div>
            </div>
        </div>
    </section>
    <div class="container">
        <div class="row">
            <div class="col-sm">
                    <div class="imagePreview">
                        <img id="image_view" th:src="${session.image.getImagePath()}"/>
                    </div>
            </div>
            <div class="col-sm">
                <div class="col result_json">
                    <p>json 결과</p>
                    <span class="result"></span>
                </div>
                <div class="row-cols-3 d-grid gap-2 d-md-block download_content">
                    <button type="button" class="btn btn-primary ">다운로드</button>
                    <button type="button" class="btn btn-primary ">다른이름으로 다운로드</button>
                </div>
            </div>

        </div>
    </div>
    <script th:inline="javascript">
        var path22= [[${imagePath}]]
        var result= [[${result}]]
        console.log(path22)
        console.log("result: " +result)

        $(".result").append(result)

        var result_json = [[${result_json}]]
        var json = JSON.parse(result_json)
        //좌표 설정
        for(i=0; i<json.length; i++){
            name = "face"+ i
            x=json[i].local_x;
            y=json[i].local_y;
            w=json[i].local_w;
            h=json[i].local_h;
            var divDemo = document.createElement('div');
            divDemo.setAttribute("id",name)
            $(divDemo).css("top",y+"px");
            $(divDemo).css("left",x+"px");
            $(divDemo).css("weight",w+"px");
            $(divDemo).css("height",h+"px");
            $(divDemo).css("border","2px solid black");
            $(divDemo).css("opacity","0.5");
            $(".imagePreview").append(divDemo)
        }
    </script>
    <!-- /.main 끝 -->

</div>
</html>